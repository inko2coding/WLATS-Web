<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../WLATSlogopng.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.0/css/all.css" integrity="sha384-OLYO0LymqQ+uHXELyx93kblK5YIS3B2ZfLGBmsJaUyor7CpMTBsahDHByqSuWW+q" crossorigin="anonymous">
    <title>WLATS Kindergarten Quiz</title>
</head>

<body>
    <button id="finish-btn">Finish</button>
    <div id="enter-cont">
        <span class="alert">Please make sure to fill out all the feilds or the functionalities will not work.</span class="alert">
        <div class="enter">

            <input type="text" name="name" id="name" placeholder="Student Name">
            <input type="number" name="id_num" id="id_num" placeholder="ID #">
            <button id="submit-btn" type="submit">Add Student</button>
        </div>
        <div class="current-cont">
            <h2>Current Students</h2>
            <div id="current">

            </div>
        </div>
    </div>
    <main>
        <div id="students" class="students">



        </div>

        <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTZUA8aCVOef0fxKwHsM0LxjNLyMoON0qgyHqO0dPAt225UUDjk113anZPXGMBcew/embed?start=false&loop=false&delayms=30000" frameborder="0" width="880" height="549" allowfullscreen="true" mozallowfullscreen="true"
            webkitallowfullscreen="true"></iframe>
        <div class="timer">
            <h2>Time Left</h2>
            <h3 id="time-disp">0</h3>
            <button onclick="timeClick();" id="time-btn">Start</button>
        </div>
    </main>
    <footer>
        <div class="footer-top">
            <div class="footer-container">
                <div class="footer-row">
                    <div class="col-md-3 col-ms-6 col-xs-12 segment-one md-mb-30 sm-mb-30">
                        <h3>WLATS</h3>
                        <p>West Los Angeles Tamil School(WLATS) is a non-profit volunteer-run organization dedicated to the teaching of Tamil language to children and adults. WLATS is affiliated International Tamil Academy(ITA) and we utilize the syllabus
                            and curriculum from ITA</p>
                    </div>
                    <div class="col-md-3 col-ms-6 col-xs-12 segment-two md-mb-30 sm-mb-30">
                        <h2>Quick links</h2>
                        <ul>
                            <li><a href="calendar.html">Top of page</a></li>
                            <li><a href="home.html">Home</a></li>
                            <li><a class="nav-act" href="staff.html">Members</a></li>
                            <li><a href="registration.html">Registration</a></li>
                            <li><a href="gallery.html">Gallery</a></li>
                            <li><a href="about.html">About Us</a></li>
                            <li><a href="contact.html">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-ms-6 col-xs-12 segment-three sm-mb-30">
                        <h2>Follow Us</h2>
                        <p>Follow us on social media to stay up to date on our latest news.</p>
                        <a href="https://www.facebook.com/WestLATamilSchool/" target="_blank"><i class="fab fa-facebook-f"></i></a>
                        <!-- <a href="#" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="#" target="_blank"><i class="fab fa-instagram"></i></a> -->
                        <a href="mailto: westlatamil@gmail.com" target="_blank"><i class="fas fa-envelope"></i></a>
                    </div>
                    <!-- <div class="col-md-3 col-ms-6 col-xs-12 segment-four sm-mb-30">
                        <h2>Our Newletter</h2>
                        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Iste, reiciendis. Architecto neque laudantium aliquam ad!</p>
                        <form action="">
                            <input type="email" placeholder="abc@123.com">
                            <input type="submit" value="Subscribe">
                        </form>
                    </div> -->
                </div>
            </div>
        </div>
        <p class="footer-bottom-text">All Rights Reserved by &copy;West LA Tamil School. 2020. Powered by <a target="_blank" href="http://inko2.com">INKO2 Inc.</a></p>
    </footer>
    <script>
            const finishBtn = document.getElementById('finish-btn');
            const submitBtn = document.getElementById('submit-btn');
            var students = [];

            if (!localStorage.getItem('finishClick')) {
                localStorage.setItem('finishClick', 'true');
            }

            if (localStorage.getItem('finishClick') == 'true') {
                document.getElementById('enter-cont').style.display = 'block';
                document.querySelector('main').style.display = 'none';
            } else {
                document.getElementById('enter-cont').style.display = 'none';
                document.querySelector('main').style.display = 'flex';
            }

            finishBtn.onclick = function() {
                    if (localStorage.getItem('finishClick') == 'true') {
                        document.getElementById('enter-cont').style.display = 'block';
                        document.querySelector('main').style.display = 'none';
                        finishBtn.innerHTML = 'Finish';
                        localStorage.setItem('finishClick', 'false');
                        location.href = '../quiz/home.html';
                    } else {
                        document.getElementById('enter-cont').style.display = 'none';
                        document.querySelector('main').style.display = 'flex';
                        finishBtn.innerHTML = 'Reset Students';
                        localStorage.setItem('finishClick', 'true');
                        for (let i = 0; i < students.length; i++) {
                            document.querySelector('.students').innerHTML += `

                            <div class='student-info'>
                                <span class="student-name">${students[i].name}</span>
                                <span class="student-points" id="point-${students[i].id_num}">${localStorage.getItem(`point-${students[i].id_num}`)}</span>
                                <button class="inc-btn" onclick="increasePoints('point-${students[i].id_num}', ${localStorage.getItem(`point-${students[i].id_num}`)}, '${students[i].name}')"><i class="fas fa-plus"></i></button>
                                <button class="dec-btn" onclick="decreasePoints('point-${students[i].id_num}', ${localStorage.getItem(`point-${students[i].id_num}`)}, '${students[i].name}')"><i class="fas fa-minus"></i></button>
                            </div>

                        `;

                            if (localStorage.getItem(`point-${students[i].id_num}`)) {
                                localStorage.setItem(`point-${students[i].id_num}`, localStorage.getItem(`point-${students[i].id_num}`));
                                document.getElementById(`point-${students[i].id_num}`).innerHTML = localStorage.getItem(`point-${students[i].id_num}`);
                            } else {
                                localStorage.setItem(`point-${students[i].id_num}`, 0)
                                document.getElementById(`point-${students[i].id_num}`).innerHTML = localStorage.getItem(`point-${students[i].id_num}`);
                            }
                    }

 
                    location.href = '../quiz/home.html';

                }
        };

 

        function timeClick() {

            var timeInp = prompt('How many seconds would you like for your timer?');

 

            if(timeInp) {

                timer(parseInt(timeInp));

            } else if(timeInp == null || undefined) {

                

            } else {

                timer(20);

            }

        }


        

        submitBtn.onclick = function() {
            if ((document.getElementById('id_num').value != null || undefined) && (document.getElementById('name').value != null || undefined)) {

                students.push({
                    name: document.getElementById('name').value,
                    id_num: document.getElementById('id_num').value,
                })

                localStorage.setItem('students', JSON.stringify(students));

                document.getElementById('current').innerHTML += `<h3 id="student-${document.getElementById('id_num').value}">${document.getElementById('name').value}<br></h3>`;
            }
        }

        function increasePoints(id, pointVal, name) {
            localStorage.setItem(id, pointVal += 1);
            location.href = '../quiz/home.html';
            document.getElementById(id).innerHTML = pointVal;
        }

        function decreasePoints(id, pointVal, name) {
            localStorage.setItem(id, pointVal -= 1);
            location.href = '../quiz/home.html';
            document.getElementById(id).innerHTML = pointVal;
        }
        
 

        function timer(time) {

            const timeDisp = document.getElementById('time-disp');

            timeDisp.innerHTML = time;

            timeCount();

            function timeCount() {

 

                setTimeout(() => {

                    if (time > 0) {

                        time -= 1;

                        console.log(time);

                        timeDisp.innerHTML = time;

                        timeCount();

                    } else {

                        

                        var audio = new Audio('../audios/audio.mp3');

 

                        

                        audio.oncanplaythrough = function(){

                            audio.play();

                        }

 

                    }

                }, 1000);

            }

        }

        window.onload = function() {
            if (localStorage.getItem('finishClick') == 'true') {
                document.getElementById('enter-cont').style.display = 'block';
                document.querySelector('main').style.display = 'none';
                finishBtn.innerHTML = 'Finish';
            } else {
                document.getElementById('enter-cont').style.display = 'none';
                document.querySelector('main').style.display = 'flex';
                finishBtn.innerHTML = 'Reset Students';
                students = JSON.parse(localStorage.getItem('students'));
                console.log(students);
                for (let i = 0; i < students.length; i++) {
                    document.querySelector('.students').innerHTML += `

                    <div class='student-info'>
                        <span class="student-name">${students[i].name}</span>
                        <span class="student-points" id="point-${students[i].id_num}">${localStorage.getItem(`point-${students[i].id_num}`)}</span>
                        <button class="inc-btn" onclick="increasePoints('point-${students[i].id_num}', ${localStorage.getItem(`point-${students[i].id_num}`)}, '${students[i].name}')"><i class="fas fa-plus"></i></button>
                        <button class="dec-btn" onclick="decreasePoints('point-${students[i].id_num}', ${localStorage.getItem(`point-${students[i].id_num}`)}, '${students[i].name}')"><i class="fas fa-minus"></i></button>
                    </div>

                `;

                    if (localStorage.getItem(`point-${students[i].id_num}`)) {

                        localStorage.setItem(`point-${students[i].id_num}`, localStorage.getItem(`point-${students[i].id_num}`));

                        document.getElementById(`point-${students[i].id_num}`).innerHTML = localStorage.getItem(`point-${students[i].id_num}`);

                    } else {

                        localStorage.setItem(`point-${students[i].id_num}`, 0)

                        document.getElementById(`point-${students[i].id_num}`).innerHTML = localStorage.getItem(`point-${students[i].id_num}`);

        

                    }
                }

 

            }

            

        }
        </script>
        

</body>



</html>